# tar-backup-util
An auto backup manage tool.

## Introduction

A full-backup tool which written in Python, for backup entire data periodically.

## Features

- Can manage all types of back if you can provide a executable script for generate a single data file
- Auto manager version count, delete old data
- Copy file to permanent zone if the file size decreased sharply (by the ratio which you'd defined)

## Document

### Install

Simply copy it to your path like this:

```bash
sudo cp tbu.py /usr/bin/tbu
sudo chmod +x /usr/bin/tbu
```

### Prepare a script for generate single file

A single executable script which written in Python/Bash/... is recommended, for example:

```bash
#!/bin/bash
wget http://example.com/file.tar.gz -O data
```

After you'd written this script, save it in the name you want, for example "download.sh", and add executable permission on it.

```bash
chmod +x download.sh
```

### Edit your backup command

Then edit your backup manager command line like this:

```bash
#!/bin/bash
# This is an example
tbu \
    --path /media/DATA/BACKUP/ \
    --cmd ./download.sh \
    --gen_name data \
    --save_name sukitimeline \
    --check_size 0.97 \
    --version_count 1
```

The meaning of these parameters will be listed below:

|parameter|meaning|default|
|-|-|-|
|path|the path where you will save your backup files, 2 sub-dirs will be created here|-|
|cmd|the backup command, execute a command to generate backup data file|-|
|gen_name|the filename of the file which generated by the command|-|
|save_name|backup file prefix|-|
|check_size|if new file size is less than check_size*last file size, last file will be copy to permanent zone|0|
|version_count|how many versions to remain (will not effect `check_size`)|1|

### Add it to crontab

To run the command which you'd been edited periodically, the backup operation will be done automatically.

## Todo

- Publish it to pip and make it easy for installing.